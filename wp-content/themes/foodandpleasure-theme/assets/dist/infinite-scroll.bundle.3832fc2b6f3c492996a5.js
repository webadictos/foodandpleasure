"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["infinite-scroll"],{"./js/infinite-scroll.js":function(e,t,n){n.r(t);var o=n("./js/localstorage.js");(()=>{const r={api:WA_ThemeSetup.ajaxurl,startPage:0,postsPerPage:WA_ThemeSetup.infinite_scroll.max_page||5,articlesContainer:".articles-container",next:WA_ThemeSetup.infinite_scroll.next||[],promoted:WA_ThemeSetup.promoted||[]};let a=document.querySelector(r.articlesContainer),s=!0;const i=()=>{const t=o.ls.get("promotedviews")||[];return r.promoted=r.promoted.filter(e=>!t.includes(e)),r.promoted.shift()},l=(e,t)=>{e=new CustomEvent("is.post-load",{detail:{postID:e,infinitescroll:!0,isPromoted:t}});document.querySelector("body").dispatchEvent(e)},c=async e=>{try{return await(await fetch(((e,t)=>{t={action:"loadmore",postid:t},e=new URL(e);return e.search=new URLSearchParams(t).toString(),e})(r.api,e))).json()}catch(e){console.log(e)}},t=()=>{return window.pageYOffset>a.offsetHeight-a.offsetHeight/2&&1==s&&0<r.next.length};return{init:()=>{window.addEventListener("scroll",()=>{if(t()){let t=0;var e=i(),o=r.next.shift();let n=!1;e?(t=e,n=!0):o&&(t=o),s=!1,c(t).then(e=>{e=document.createRange().createContextualFragment(e.data);a.appendChild(e),l(t,n),s=!0})}},!1)}}})().init()},"./js/localstorage.js":function(e,t,n){n.d(t,{ls:function(){return o}});const o={set:(e,t,n=86400)=>{t={value:t,ttl:Date.now()+1e3*n};localStorage.setItem(e,JSON.stringify(t))},get:e=>{var t=localStorage.getItem(e);return t?(t=JSON.parse(t),Date.now()>t.ttl?(localStorage.removeItem(e),null):t.value):null}}}}]);