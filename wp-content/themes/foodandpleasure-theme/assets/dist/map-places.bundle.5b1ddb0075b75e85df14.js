/*! For license information please see map-places.bundle.5b1ddb0075b75e85df14.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["map-places"],{"./js/map-places.js":function(e,t,i){function u(e,o,n,l){return new(n=n||Promise)(function(i,t){function s(e){try{r(l.next(e))}catch(e){t(e)}}function a(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}r((l=l.apply(e,o||[])).next())})}i.r(t),i.d(t,{PlacesMap:function(){return a}});function g(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var i,s,a;if(Array.isArray(e)){if((i=e.length)!=t.length)return!1;for(s=i;0!=s--;)if(!g(e[s],t[s]))return!1}else{if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((i=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(s=i;0!=s--;)if(!Object.prototype.hasOwnProperty.call(t,a[s]))return!1;for(s=i;0!=s--;){var r=a[s];if(!g(e[r],t[r]))return!1}}return!0}return e!=e&&t!=t}var s;const m="__googleMapsScriptId";(i=s=s||{})[i.INITIALIZED=0]="INITIALIZED",i[i.LOADING=1]="LOADING",i[i.SUCCESS=2]="SUCCESS",i[i.FAILURE=3]="FAILURE";class L{constructor({apiKey:e,authReferrerPolicy:t,channel:i,client:s,id:a=m,language:r,libraries:o=[],mapIds:n,nonce:l,region:c,retries:d=3,url:p="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=i,this.client=s,this.id=a||m,this.language=r,this.libraries=o,this.mapIds=n,this.nonce=l,this.region=c,this.retries=d,this.url=p,this.version=h,L.instance){if(g(this.options,L.instance.options))return L.instance;throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== `+JSON.stringify(L.instance.options))}L.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?s.FAILURE:this.done?s.SUCCESS:this.loading?s.LOADING:s.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+="&key="+this.apiKey),this.channel&&(e+="&channel="+this.channel),this.client&&(e+="&client="+this.client),0<this.libraries.length&&(e+="&libraries="+this.libraries.join(",")),this.language&&(e+="&language="+this.language),this.region&&(e+="&region="+this.region),this.version&&(e+="&v="+this.version),this.mapIds&&(e+="&map_ids="+this.mapIds.join(",")),this.authReferrerPolicy&&(e+="&auth_referrer_policy="+this.authReferrerPolicy),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,i)=>{this.loadCallback(e=>{e?i(e.error):t(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e;if(document.getElementById(this.id))this.callback();else{const t={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};if(Object.keys(t).forEach(e=>!t[e]&&delete t[e]),null==(e=null==(e=null===window||void 0===window?void 0:window.google)?void 0:e.maps)||!e.importLibrary){var c=t;let s,a,r,o="The Google Maps JavaScript API",n="google",i="importLibrary",l=document,e=window;const d=(e=e[n]||(e[n]={})).maps||(e.maps={}),p=new Set,h=new URLSearchParams,g=()=>s=s||new Promise((t,i)=>u(this,void 0,void 0,function*(){var e;for(r in yield a=l.createElement("script"),a.id=this.id,h.set("libraries",[...p]+""),c)h.set(r.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),c[r]);h.set("callback",n+".maps.__ib__"),a.src=this.url+"?"+h,d.__ib__=t,a.onerror=()=>s=i(Error(o+" could not load.")),a.nonce=this.nonce||(null==(e=l.querySelector("script[nonce]"))?void 0:e.nonce)||"",l.head.append(a)}));d[i]?console.warn(o+" only loads once. Ignoring:",c):d[i]=(e,...t)=>p.add(e)&&g().then(()=>d[i](e,...t))}this.importLibrary("core").then(()=>this.callback(),e=>{e=new ErrorEvent("error",{error:e});this.loadErrorCallback(e)})}}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){var t;this.errors.push(e),this.errors.length<=this.retries?(t=this.errors.length*Math.pow(2,this.errors.length),console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)):(this.onerrorEvent=e,this.callback())}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){this.resetIfRetryingFailed(),this.done?this.callback():window.google&&window.google.maps&&window.google.maps.version?(console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback()):this.loading||(this.loading=!0,this.setScript())}}const a=(()=>{let e;const l={},c={};let s=!1,n=!1;var t=ThemeSetupDos.themeUri;const o=ThemeSetupDos.maps.marker||t+"/assets/images/marker.png",i=ThemeSetupDos.maps.markerActive||t+"/assets/images/marker.png",a=ThemeSetupDos.maps.api||"";let r=ThemeSetupDos.maps.center||{lat:19.4326018,lng:-99.1332049};const d=parseInt(ThemeSetupDos.maps.zoom)||13;const p=e=>{var t,i=document.getElementById("post-"+e),s=m(e);i&&(t=i.querySelector("h1").innerText,0<[...i=h(i)].length)&&(g(t,e,s),y(e,[...i]),f(i,e))},h=e=>e.querySelectorAll("[data-place-id]"),g=(e,t,i)=>{e=`
    <div id="wa-maps-widget-${t}" class="widget wa_maps_widget ${u()?"fixed-bottom":""}">
    <div class="widget-header">
        <h3 class="widget-title">${e}</h3>
        <button class="btn btn-primary btn-close-map collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#map-widget-${t}" aria-expanded="false" aria-controls="map-widget-${t}">
        </button>
    </div>
        <div id="map-widget-${t}" class="map-widget collapse" data-map-id="${t}">
            <div id="map-container-${t}" class="map-container"></div>
            <div id="map-places-container-${t}" class="map-places-container"></div>
        </div>
    </div>
`,e=document.createRange().createContextualFragment(e);if(i.prepend(e),u()){{i=t;const a=document.getElementById(`post-${i}`),r=a.querySelector(".entry-main-text"),o=a.querySelector("footer"),n=a.querySelector(`.btn-close-map`),l=a.querySelector(`.wa_maps_widget .map-widget`),c=a.querySelector(`.wa_maps_widget`);let s=window.pageYOffset;const d=(e,t)=>e.forEach(t=>{const e=window.pageYOffset;const i=e<s;if(t.isIntersecting){let e=t.target;if(e.classList.contains("single-entry__footer")){c.classList.remove("fixed-bottom");l.classList.add("show")}else if(e.classList.contains("entry-main-text"))if(!l.dataset.isMinimized){l.classList.add("show");n.classList.remove("collapsed")}}else if(t.target.classList.contains("single-entry__footer")&&i&&!c.classList.contains("fixed-bottom"))c.classList.add("fixed-bottom");s=e}),p=new IntersectionObserver(d,{rootMargin:"0px 0px 0px 0px"});p.observe(r),p.observe(o)}const s=document.getElementById("map-widget-"+t);s.addEventListener("hidden.bs.collapse",e=>{s.toggleAttribute("data-is-minimized",!0)})}},u=()=>{return window.matchMedia("(max-width: 991px)").matches},m=e=>{e=document.getElementById("post-"+e);return u()?e.querySelector("footer"):e.querySelector(".single-widget-area")};const f=(e,i)=>{const t=new IntersectionObserver((e,t)=>e.forEach(e=>{var t;e.isIntersecting&&(t={id:(e=e.target).dataset.placeId},n?e.dataset.isScrolling&&(n=!1,e.removeAttribute("data-is-scrolling")):b(i,t))}),{rootMargin:"0px 0px 0px 0px"});e.forEach(e=>t.observe(e))},y=(o,n)=>{var e=new L({apiKey:a,version:"weekly"});const i={center:r,zoom:d,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}],mapTypeControl:!1,streetViewControl:!1};e.load().then(e=>{var t=new e.maps.Map(document.getElementById("map-container-"+o),i);l[o]=t,e.maps.event.addListener(t,"idle",()=>{if(!s){s=!0;{var a=o,r=n;let e=document.getElementById("map-widget-"+a),t="",i=e.querySelector(".map-places-container"),s=(c[a]={},r.forEach(e=>{e={id:e.dataset.placeId,title:e.dataset.placeTitle,latitud:parseFloat(e.dataset.placeLatitude),longitud:parseFloat(e.dataset.placeLongitude)};t+=w(e),v(e,a)}),`
    <ul class="wa-item-map-places__list" id="map-places-list-${a}">
    ${t}
    </ul>
    `);r=document.createRange().createContextualFragment(s);i.appendChild(r),document.querySelectorAll(`#map-places-list-${a} > li`).forEach(i=>{i.addEventListener("click",e=>{var t={id:i.dataset.placeId};b(a,t,!0)})})}}})}).catch(e=>{})},w=e=>{var t=e.title;return`
      <li class="wa-item-map-places__item" data-place-id="${e.id}">${t}</li>
    `},v=(e,t)=>{var i=e.latitud,s=e.longitud,a=(l[t],document.getElementById("map-places-container-"+t),document.getElementById("post-"+t),`

        <h4 class="location-item-title">${e.title}</h4>

    `),a=new google.maps.InfoWindow({content:a});const r=new google.maps.Marker({position:{lat:i,lng:s},visible:!0,map:l[t],title:e.title||"",icon:{url:o,scaledSize:new google.maps.Size(47,65)},infowindow:a});a.addListener("closeclick",()=>{E(r,!1)}),r.addListener("click",()=>{b(t,e,!0)}),c[t][e.id]=r},b=(e,t,i=!1)=>{var s=document.getElementById("map-places-container-"+e),a=document.getElementById("post-"+e),r=l[e],o=c[e][t.id];S(e,t)||(k(e),E(o,!0),o.infowindow.open({anchor:o,map:r,shouldFocus:!1}),r.setCenter(o.getPosition()),r.getZoom()<14&&r.setZoom(14),s.querySelector(`[data-place-id="${t.id}"]`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),I(a),s.querySelector(`[data-place-id="${t.id}"]`).classList.add("active"),a.querySelector(`[data-place-id="${t.id}"]`).scrollIntoView({behavior:"smooth",block:"center",inline:"start"}),i&&(n=!0,a.querySelector(`[data-place-id="${t.id}"]`).setAttribute("data-is-scrolling",!0)))},I=e=>{[...h(e)].forEach(e=>{e.classList.remove("active")})},S=(e,t)=>{return document.getElementById("map-places-container-"+e).querySelector(`[data-place-id="${t.id}"]`).classList.contains("active")},E=(e,t)=>{t?e.setIcon({url:i,scaledSize:new google.maps.Size(47,65)}):e.setIcon({url:o,scaledSize:new google.maps.Size(47,65)})},k=e=>{const t=l[e];Object.entries(c[e]).forEach(([,e])=>{e.infowindow.close(t,e),E(e,!1)})};return{init:()=>{e=ThemeSetupDos.currentID||0,p(e),document.querySelector("body").addEventListener("is.post-load",e=>{e.detail.postID&&(e.detail.infinitescroll&&(isInfiniteScroll=!0,currentPostId=e.detail.postID),p(e.detail.postID))})}}})()}}]);