"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["map-places"],{"./js/leaflet-places.js":function(e,t,a){a.r(t),a.d(t,{PlacesMap:function(){return s}});a("../node_modules/@googlemaps/js-api-loader/dist/index.esm.js");var t=a("../node_modules/leaflet/dist/leaflet-src.js"),b=a.n(t);const s=(()=>{let e;const c={},l={};let d=!1;var t=WA_ThemeSetup.themeUri;const a=WA_ThemeSetup.maps.marker||t+"/assets/images/marker.png",s=WA_ThemeSetup.maps.markerActive||t+"/assets/images/marker.png";WA_ThemeSetup.maps.api;let i=WA_ThemeSetup.maps.center||{lat:19.4326018,lng:-99.1332049};const o=parseInt(WA_ThemeSetup.maps.zoom)||13,n=WA_ThemeSetup.maps.map_category??"maps";const r=e=>{var t,a=document.getElementById("post-"+e),s=g(e);a&&a.classList.contains("category-"+n)&&(t=a.querySelector("h1").innerText,0<[...a=p(a)].length)&&(m(t,e,s),v(e,[...a]),u()||h(a,e))},p=e=>e.querySelectorAll("[data-place-id]"),m=(e,t,a)=>{e=`
    <div id="wa-maps-widget-${t}" class="widget wa_maps_widget ${u()?"is-mobile":""}">
    <div class="widget-header">
        <h3 class="widget-title">${e}</h3>
    </div>
        <div id="map-widget-${t}" class="map-widget" data-map-id="${t}">
            <div id="map-container-${t}" class="map-container"></div>
            <div id="map-places-container-${t}" class="map-places-container"></div>
        </div>
    </div>
`,t=document.createRange().createContextualFragment(e);u()?a.after(t):a.prepend(t)},u=()=>{return window.matchMedia("(max-width: 991px)").matches},g=e=>{e=document.getElementById("post-"+e);return u()?e.querySelector(".entry-excerpt"):e.querySelector(".single-widget-area")};const h=(e,a)=>{const t=new IntersectionObserver((e,t)=>e.forEach(e=>{var t;e.isIntersecting&&(t={id:(e=e.target).dataset.placeId},d?e.dataset.isScrolling&&(d=!1,e.removeAttribute("data-is-scrolling")):w(a,t,!1,!0))}),{rootMargin:"0px 0px 0px 0px"});e.forEach(e=>t.observe(e))},v=(e,t)=>{var a=b().map("map-container-"+e).setView([i.lat,i.lng],o);(c[e]=a).on("load",function(){console.log("El mapa se ha cargado completamente")})};const w=(e,t,a=!1,s=!1)=>{var i=document.getElementById("map-places-container-"+e),o=document.getElementById("post-"+e),n=c[e],r=l[e][t.id];y(e,t)||(I(e),f(r,!0),r.infowindow.open({anchor:r,map:n,shouldFocus:!1}),n.setCenter(r.getPosition()),n.getZoom()<14&&n.setZoom(14),u()||i.querySelector(`[data-place-id="${t.id}"]`).scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),S(o),i.querySelector(`[data-place-id="${t.id}"]`).classList.add("active"),s||u()||o.querySelector(`[data-place-id="${t.id}"]`).scrollIntoView({behavior:"smooth",block:"center",inline:"start"}),a&&(d=!0,o.querySelector(`[data-place-id="${t.id}"]`).setAttribute("data-is-scrolling",!0)))},S=e=>{[...p(e)].forEach(e=>{e.classList.remove("active")})},y=(e,t)=>{return document.getElementById("map-places-container-"+e).querySelector(`[data-place-id="${t.id}"]`).classList.contains("active")},f=(e,t)=>{t?e.setIcon({url:s,scaledSize:new google.maps.Size(47,65)}):e.setIcon({url:a,scaledSize:new google.maps.Size(47,65)})},I=e=>{const t=c[e];Object.entries(l[e]).forEach(([,e])=>{e.infowindow.close(t,e),f(e,!1)})};return{init:()=>{e=WA_ThemeSetup.currentID||0,r(e),document.querySelector("body").addEventListener("is.post-load",e=>{e.detail.postID&&(e.detail.infinitescroll,r(e.detail.postID))})}}})()}}]);